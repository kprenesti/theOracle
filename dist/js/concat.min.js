var app=angular.module("app",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(t,r){r.otherwise("/"),t.state("home",{url:"/",templateUrl:"templates/search.html",controller:"mainCntrl as main"}).state("results",{url:"/results",templateUrl:"templates/results.html",controller:"resultsCntrl as results"}).state("articleView",{url:"/article/:id",templateUrl:"templates/article.html",controller:"articleCntrl as article"})}]);angular.module("app").service("httpSvc",["$http","$q",function(t,r){var e=this;return e.searchAPI=function(e){var a=r.defer(),s="https://en.wikipedia.org/w/api.php?format=json&action=query&generator=search&gsrnamespace=0&gsrlimit=10&prop=pageimages|extracts&pilimit=max&exintro&explaintext&exsentences=2&exlimit=max&gsrsearch=",l="&callback=JSON_CALLBACK";return t.jsonp(s+e+l).then(function(t){a.resolve(t.data)}.bind(this),function(t){a.reject({error:t.data,status:t.status})}),a.promise},e}]),angular.module("app").factory("setData",function(){return{storeData:function(t){var r=t.query.pages;this.articles=[];for(prop in r)this.articles.push(r[prop]);return this.articles}}}),app.controller("articleCntrl",["results",function(t){var r=this;r.listData=t.returnResults(),console.log("From the articleCntrl: ",r.list)}]),app.controller("mainCntrl",["$http","httpSvc","setData","$state",function(t,r,e,a){var s=this;s.submitForm=function(t){r.searchAPI(t).then(function(t){e.storeData(t),console.log(e.articles),a.go("results")})}}]),angular.module("app").controller("resultsCntrl",["$state","setData",function(t,r){var e=this;e.data=r,e.articles=e.data.articles}]);